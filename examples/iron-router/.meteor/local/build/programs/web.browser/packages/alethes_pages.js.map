)]}'
{"version":3,"file":"/packages/alethes:pages.js","sources":["alethes:pages/lib/pages.coffee","alethes:pages/client/templates.html","alethes:pages/client/controllers.coffee"],"names":[],"mappings":"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","sourcesContent":["@__Pages = class Pages\n  settings:\n    #settingName: [canBeMadeAvailableToTheClient, expectedTypes(s), defaultValue]\n    dataMargin: [true, Number, 3]\n    divWrapper: [true, Match.Optional(String), undefined] #If defined, should be a name of the wrapper's CSS classname\n    fields: [true, Object, {}]\n    filters: [true, Object, {}]\n    itemTemplate: [true, String, \"_pagesItemDefault\"]\n    navShowEdges: [true, Boolean, false] #If true, overrides navShowFirst and navShowLast\n    navShowFirst: [true, Boolean, true] #If true, overrides navShowEdges\n    navShowLast: [true, Boolean, true] #If true, overrides navShowEdges\n    resetOnReload: [true, Boolean, false]\n    paginationMargin: [true, Number, 3]\n    perPage: [true, Number, 10]\n    #requestTimeout: [true, Number, 2]\n    route: [true, String, \"/page/\"]\n    router: [true, Match.Optional(String), undefined] #Can be any type. Use only in comparisons. Expects String or Boolean\n    routerTemplate: [true, String, \"pages\"]\n    routerLayout: [true, Match.Optional(String), undefined]\n    sort: [true, Object, {}]\n    #Unavailable to the client after initialization\n    auth: [false, Match.Optional(Function), undefined]\n    availableSettings: [false, Object, {}]\n    fastRender: [false, Boolean, false]\n    infinite: [false, Boolean, false]\n    infiniteItemsLimit: [false, Number, Infinity]\n    infiniteTrigger: [false, Number, .9]\n    infiniteRateLimit: [false, Number, 1]\n    pageSizeLimit: [false, Number, 60]\n    rateLimit: [false, Number, 1]\n    homeRoute: [false, Match.OneOf(String, Array), \"/\"]\n    pageTemplate: [false, String, \"_pagesPageCont\"]\n    navTemplate: [false, String, \"_pagesNavCont\"]\n    onDeniedSetting: [false, Function, (k, v, e) -> console?.log? \"Changing #{k} not allowed.\"]\n    table: [false, Match.OneOf(Boolean, Object), false]\n    tableItemTemplate: [false, String, \"_pagesTableItem\"]\n    tableTemplate: [false, String, \"_pagesTable\"]\n    templateName: [false, Match.Optional(String), undefined] #Defaults to collection name\n  _ninstances: 0\n  _currentPage: 1\n  collections: {}\n  init: true\n  instances: {}\n  subscriptions: []\n  userSettings: {}\n  methods:\n    \"CountPages\": (sub) ->\n      n = sub.get \"nPublishedPages\"\n      return n  if n\n      n = Math.ceil @Collection.find(sub.get(\"realFilters\") or {}).count() / (sub.get \"perPage\")\n      n or 1\n    \"Set\": (k, v, sub) ->\n      check k, String\n      check v, Match.Any\n      check sub, Match.Where (s) ->\n        s.connection?.id?\n      return 0  if @valuesEqual(@get(k, sub.connection.id), v)\n      if !@availableSettings[k] or (_.isFunction(@availableSettings[k]) and !@availableSettings[k] v, sub)\n        @error 4002, \"Changing #{k} not allowed.\"\n      changes = 0\n      if v?\n        changes = @_set k, v, cid: sub.connection.id + @name\n      else if !_.isString k\n        for _k, _v of k\n          changes += @set _k, _v, cid: sub.connection.id + @name\n      changes\n    \"Unsubscribe\": ->\n      subs = []\n      for i, k in @subscriptions\n        if i.connection.id is arguments[arguments.length - 1].connection.id\n          i.stop()\n        else\n          subs.push i\n      @subscriptions = subs\n      true\n  constructor: (collection, settings = {}) ->\n    unless @ instanceof Meteor.Pagination\n      @error 4000, \"The Meteor.Pagination instance has to be initiated with `new`\"\n    @setCollection collection\n    @set settings, init: true\n    @setDefaults()\n    @setRouter()\n    @[(if Meteor.isServer then \"server\" else \"client\") + \"Init\"]()\n    @registerInstance()\n    @\n  error: (code, msg) ->\n    msg = code  if !code?\n    throw new Meteor.Error code, msg\n  preloadData: (key, value) ->\n    @PreloadedData.remove _id: key\n    @PreloadedData.insert _id: key, v: value\n  serverInit: ->\n    @setMethods()\n    self = @\n    Meteor.onConnection (connection) =>\n      connection.onClose =>\n        delete @userSettings[connection.id]\n    Meteor.publish @name, (page) ->\n      self.publish.call self, page, @\n    Meteor.publish @name + \"_data\", ->\n      self.PreloadedData.find()\n  clientInit: ->\n    @requested = {}\n    @received = {}\n    @queue = []\n    @setTemplates()\n    @countPages()\n    Tracker.autorun =>\n      Meteor.userId?()\n      @reload()\n    @setInfiniteTrigger()  if @infinite\n  reload: ->\n    @unsubscribe =>\n      @requested = {}\n      @received = {}\n      @queue = []\n      @call \"CountPages\", (e, total) =>\n        @sess \"totalPages\", total\n        p = @currentPage()\n        p = 1  if (not p?) or @resetOnReload or p > total\n        @sess \"currentPage\", false\n        @sess \"currentPage\", p\n  unsubscribe: (cb) ->\n    @call \"Unsubscribe\", =>\n      cb()  if cb?\n  setDefaults: ->\n    for k, v of @settings\n      @[k] ?= v[2]  if v[2]?\n  syncSettings: (cb) ->\n    S = {}\n    for k, v of @settings\n      if v[0]\n        S[k] = @[k]\n    @set S, if cb? then {cb: cb.bind(@)} else null\n  setMethods: ->\n    nm = {}\n    self = @\n    for n, f of @methods\n      nm[@id + n] = ((f) ->\n        ->\n          arg = []\n          for k, v of arguments\n            arg[k] = v\n          arg.push @\n          @get = ((self, k) -> self.get k, @connection.id).bind @, self\n          r = f.apply self, arg\n          r\n      )(f)\n    @methods = nm\n    Meteor.methods @methods\n  getMethodName: (name) ->\n    @id + name\n  call: (args...) ->\n    check args, Array\n    if args.length < 1\n      @error 4001, \"Method name not provided in a method call.\"\n    args[0] = @getMethodName args[0]\n    last = args.length - 1\n    if _.isFunction args[last]\n      args[last] = args[last].bind @\n    Meteor.call.apply @, args\n  sess: (k, v) ->\n    return  if !Session?\n    k = \"#{@id}.#{k}\"\n    if v?\n      Session.set k, v\n    else\n      Session.get k\n  get: (setting, connectionId) ->\n    @userSettings[connectionId]?[setting] ? @[setting]\n  set: (k, opts...) ->\n    ch = 0\n    switch opts.length\n      when 0\n        if !_.isString k\n          for _k, _v of k\n            ch += @_set _k, _v\n      when 1\n        if _.isObject k\n          if _.isFunction opts[0]\n            opts = cb: opts[1]\n          for _k, _v of k\n            ch += @_set _k, _v, opts\n        else\n          check k, String\n          ch = @_set k, opts[0]\n      when 2\n        if _.isFunction opts[1]\n          opts[1] = cb: opts[1]\n        ch = @_set k, opts[0], opts[1]\n      when 3\n        check opts[1], Object\n        check opts[2], Function\n        opts[1].cb = opts[2]\n        ch = @_set k, opts[1], opts\n    if Meteor.isClient and ch\n      @reload()\n    ch\n  _set: (k, v, opts = {}) ->\n    check k, String\n    ch = 0\n    if Meteor.isServer or !@[k]? or @settings[k]?[0] or opts.init\n      if @settings[k]?[1]? and @settings[k]?[1] isnt true\n        check v, @settings[k][1]\n      oldV = @get(k, opts?.cid)\n      if !@valuesEqual(oldV, v)\n        @[k] = v\n        ch = 1\n      if Meteor.isClient\n        @call \"Set\", k, v, (e, r) ->\n          if e\n            @[k] = oldV\n            return @onDeniedSetting.call @, k, v, e\n          opts.cb? ch\n      else\n        if opts.cid\n          if ch\n            @userSettings[opts.cid] ?= {}\n            @userSettings[opts.cid][k] = v\n        else\n          @[k] = v\n        opts.cb? ch\n    else\n      @onDeniedSetting.call @, k, v\n    ch\n  valuesEqual: (v1, v2) ->\n    EJSON.equals(v1, v2) or (v1?.toString? and v2?.toString? and v1.toString() is v2.toString())\n  setId: (name) ->\n    if @templateName\n      name = @templateName\n    if name of Pages::instances\n      n = name.match /[0-9]+$/\n      if n?\n        name = name[0 ... name.length - n[0].length] + (parseInt(n) + 1)\n      else\n        name = name + \"2\"\n    @id = \"pages_\" + name\n    @name = name\n  registerInstance: ->\n    Pages::_ninstances++\n    Pages::instances[@name] = @\n  setCollection: (collection) ->\n    if typeof collection is 'object'\n      Pages::collections[collection._name] = collection\n      @Collection = collection\n    else\n      isNew = true\n      try\n        @Collection = new Mongo.Collection collection\n        Pages::collections[@name] = @Collection\n      catch e\n        isNew = false\n        @Collection = Pages::collections[@name]\n        @Collection instanceof Mongo.Collection or throw \"The '#{collection}' collection \n        was created outside of <Meteor.Pagination>. Pass the collection object\n        instead of the collection's name to the <Meteor.Pagination> constructor.\"\n    @setId @Collection._name\n    @PaginatedCollection = new Mongo.Collection @id\n    @PreloadedData = new Mongo.Collection @id + \"_data\"\n  setRouter: ->\n    if @router is \"iron-router\"\n      pr = \"#{@route}:n\"\n      t = @routerTemplate\n      l = @routerLayout ? undefined\n      self = @\n      init = true\n      Router.map ->\n        if self.homeRoute\n          if _.isString self.homeRoute\n            self.homeRoute = [self.homeRoute]\n          for hr, k in self.homeRoute\n            console.log hr\n            @route \"#{self.name}_home#{k}\",\n              path: hr\n              template: t\n              layoutTemplate: l\n              onBeforeAction: ->\n                self.sess \"oldPage\", 1\n                self.sess \"currentPage\", 1\n        unless self.infinite\n          @route \"#{self.name}_page\",\n            path: pr\n            template: t\n            layoutTemplate: l\n            onBeforeAction: ->\n              Tracker.nonreactive =>\n                self.onNavClick parseInt @params.n\n      if Meteor.isServer and @fastRender\n        self = @\n        FastRender.route \"#{@route}:n\", (params) ->\n          @subscribe self.name + \"_data\"\n          @subscribe self.name, parseInt params.n\n        FastRender.route @homeRoute, ->\n          @subscribe self.name + \"_data\"\n          @subscribe self.name, 1    \n  setPerPage: ->\n    @perPage = if @pageSizeLimit < @perPage then @pageSizeLimit else @perPage\n  setTemplates: ->\n    name = @templateName or @name\n    if @table and @itemTemplate is \"_pagesItemDefault\"\n      @itemTemplate = @tableItemTemplate\n    for i in [@navTemplate, @pageTemplate, @itemTemplate, @tableTemplate]\n      tn = @id + i\n      Template[tn] = new Blaze.Template \"Template.#{tn}\", Template[i].renderFunction\n      Template[tn].helpers _TemplateHelpers[i]\n      Template[tn].events _TemplateEvents[i]\n      Template[tn].helpers pagesData: @\n    Template[name].helpers\n      pagesData: @\n      pagesNav: Template[@id + @navTemplate]\n      pages: Template[@id + @pageTemplate]\n  countPages: _.throttle ->\n      @call \"CountPages\", ((e, r) ->\n        @sess \"totalPages\", r\n        if @sess(\"currentPage\") > r\n          @sess \"currentPage\", 1\n      ).bind(@)\n    , 500\n  publishNone: ->\n    @ready()\n    return @Collection.find null\n  publish: (page, sub) ->\n    check page, Number\n    check sub, Match.Where (s) ->\n      s.ready?\n    cid = sub.connection.id\n    get = sub.get = ((cid, k) -> @get k, cid).bind(@, cid)\n    set = sub.set = ((cid, k, v) -> @set k, v, cid: cid).bind(@, cid)\n    delete @userSettings[cid]?.realFilters\n    delete @userSettings[cid]?.nPublishedPages\n    @setPerPage()\n    skip = (page - 1) * get \"perPage\"\n    skip = 0  if skip < 0\n    filters = get \"filters\"\n    options = \n      sort: get \"sort\"\n      fields: get \"fields\"\n      skip: skip\n      limit: get \"perPage\"\n    if @auth?\n      r = @auth.call @, skip, sub\n      if !r\n        return @publishNone()\n      else if _.isNumber r\n        set \"nPublishedPages\", r\n        return @publishNone()  if page > r\n      else if _.isArray(r) and r.length is 2\n        if _.isFunction r[0].fetch\n          c = r\n        else\n          filters = r[0]\n          options = r[1]\n      else if _.isFunction r.fetch\n        c = r\n    if !EJSON.equals({}, filters) and !EJSON.equals(get(\"filters\"), filters)\n      set \"realFilters\", filters\n    c ?= @Collection.find filters, options\n    init = true\n    self = @\n    handle = c.observe\n      addedAt: ((sub, doc, at) ->\n        try\n          doc[\"_#{@id}_p\"] = page\n          doc[\"_#{@id}_i\"] = at\n          id = doc._id\n          delete doc._id\n          unless init\n            #Add to @PaginatedCollection\n            sub.added(@id, id, doc)\n            (@Collection.find get \"filters\",\n              sort: get \"sort\"\n              fields: get \"fields\"\n              skip: skip\n              limit: get \"perPage\"\n            ).forEach (o, i) =>\n              if i >= at\n                sub.changed(@id, o._id, _.object([[\"_#{@id}_i\", i + 1]]))\n        catch e\n      ).bind @, sub\n    handle2 = c.observeChanges\n      movedBefore: ((sub, id, before) ->\n        ref = false\n        (@Collection.find get \"filters\",\n          sort: get \"sort\"\n          fields: get \"fields\"\n          skip: skip\n          limit: get \"perPage\"\n        ).forEach (o, i) =>\n          if !ref and o._id is before\n            ref = true\n            at = i\n          if ref\n            sub.changed(@id, o._id, _.object([[\"_#{@id}_i\", i + 1]]))\n          sub.changed(@id, id, _.object([[\"_#{@id}_i\", i]]))\n        #Change in @PaginatedCollection\n      ).bind @, sub\n      changed: ((sub, id, fields) ->\n        try\n          #Change in @PaginatedCollection\n          sub.changed @id, id, fields\n        catch e\n      ).bind @, sub\n      removed: ((sub, id) ->\n        try\n          #Remove from @PaginatedCollection\n          sub.removed @id, id\n        catch e\n      ).bind @, sub\n    n = 0\n    c.forEach ((doc, index, cursor) ->\n      n++\n      doc[\"_#{@id}_p\"] = page\n      doc[\"_#{@id}_i\"] = index\n      #Initial add to @PaginatedCollection\n      sub.added @id, doc._id, doc\n    ).bind @\n    init = false\n    sub.onStop ->\n      handle.stop()\n      handle2.stop()\n    @ready()\n    @subscriptions.push sub\n    c\n  loading: (p) ->\n    if !@fastRender and p is @currentPage()\n      @sess \"ready\", false\n  now: ->\n    (new Date()).getTime()\n  log: (msg) ->\n    console.log \"#{@name} #{msg}\"\n  logRequest: (p) ->\n    @timeLastRequest = @now()\n    @requesting = p\n    @requested[p] = 1\n  logResponse: (p) ->\n    delete @requested[p]\n    @received[p] = 1\n  clearQueue: ->\n    @queue = []\n  neighbors: (page) ->\n    @n = []\n    if @dataMargin is 0\n      return @n\n    for d in [1 .. @dataMargin]\n      np = page + d\n      if np <= @sess \"totalPages\"\n        @n.push np\n      pp = page - d\n      if pp > 0\n        @n.push pp\n    @n\n  queueNeighbors: (page) ->\n    for p in @neighbors page\n      @queue.push p  if !@received[p] and !@requested[p]\n  paginationNavItem: (label, page, disabled, active = false) ->\n    p: label\n    n: page\n    active: if active then \"active\" else \"\"\n    disabled: if disabled then \"disabled\" else \"\"\n  paginationNeighbors: ->\n    page = @currentPage()\n    total = @sess \"totalPages\"\n    from = page - @paginationMargin\n    to = page + @paginationMargin\n    if from < 1\n        to += 1 - from\n        from = 1\n    if to > total\n        from -= to - total\n        to = total\n    from = 1 if from < 1\n    to = total if to > total\n    n = []\n    if @navShowFirst or @navShowEdges\n      n.push @paginationNavItem \"«\", 1, page == 1\n    n.push @paginationNavItem \"<\", page - 1, page == 1\n    for p in [from .. to]\n      n.push @paginationNavItem p, p, page > total, p is page\n    n.push @paginationNavItem \">\", page + 1, page >= total\n    if @navShowLast or @navShowEdges\n      n.push @paginationNavItem \"»\", total, page >= total\n    for i, k in n\n      n[k]['_p'] = @\n    n\n  onNavClick: (n) ->\n    if n <= @sess(\"totalPages\") and n > 0\n      Deps.nonreactive =>\n        cp = @sess \"currentPage\"\n        if @received[cp]\n          @sess \"oldPage\", cp\n      @sess \"currentPage\", n\n  setInfiniteTrigger: ->\n    window.onscroll = (_.throttle ->\n      t = @infiniteTrigger\n      oh = document.body.offsetHeight\n      if t > 1\n        l = oh - t\n      else if t > 0\n        l = oh * t\n      else\n        return\n      if (window.innerHeight + window.scrollY) >= l\n        if @lastPage < @sess \"totalPages\"\n          @sess(\"currentPage\", @lastPage + 1)\n    , @infiniteRateLimit * 1000\n    ).bind @\n  checkQueue: _.throttle ->\n    cp = @currentPage()\n    neighbors = @neighbors cp\n    if !@received[cp]\n      @clearQueue()\n      @requestPage cp\n      cp = String cp\n      for k, v of @requested\n        if k isnt cp\n          if @subscriptions[k]?\n            @subscriptions[k].stop()\n            delete @subscriptions[k]\n          delete @requested[k]\n    else if @queue.length\n      while @queue.length > 0\n        i = @queue.shift()\n        if i in neighbors\n          @requestPage i\n          break\n  , 500\n  currentPage: ->\n    if Meteor.isClient and @sess(\"currentPage\")?\n      @sess \"currentPage\"\n    else\n      @_currentPage\n  isReady: ->\n    @sess \"ready\"\n  ready: (p) ->\n    if p is true or p is @currentPage() and Session?\n      @sess \"ready\", true\n  checkInitPage: ->\n    @init = false\n    m = location.pathname.match new RegExp(\"#{@route}([0-9]+)\")\n    if m\n      p = parseInt m[1]\n    else\n      p = 1\n    @sess \"oldPage\", p\n    @sess \"currentPage\", p\n  getPage: (page) ->\n    if Meteor.isClient\n      page = @currentPage()  unless page?\n      page = parseInt page\n      return  if page is NaN\n      total = @sess \"totalPages\"\n      return @ready true  if total is 0\n      if page <= total\n        @requestPage page\n        @queueNeighbors page\n        @checkQueue()\n      if @infinite\n        n = @PaginatedCollection.find({},\n          fields: @fields\n          sort: @sort\n        ).count()\n        c = @PaginatedCollection.find({},\n          fields: @fields\n          sort: @sort\n          skip: if @infiniteItemsLimit isnt Infinity and n > @infiniteItemsLimit then n - @infiniteItemsLimit else 0\n          limit: @infiniteItemsLimit\n        )\n      else\n        c = @PaginatedCollection.find(\n          _.object([\n            [\"_#{@id}_p\", page]\n          ]),\n          fields: @fields\n          sort: _.object([\n            [\"_#{@id}_i\", 1]\n          ])\n        )\n        c.observeChanges\n          added: =>\n            @countPages()\n          removed: =>\n            @countPages()\n      c.fetch()\n  requestPage: (page) ->\n    #if page not in @received\n    #  @loading page\n    return  if !page or @requested[page] or @received[page]\n    #@clearQueue()  if page is @currentPage()\n    #@queue.push page\n    @logRequest page\n    Meteor.defer ((page) ->\n      @subscriptions[page] = Meteor.subscribe @name, page,\n        onReady: ((page) ->\n          @onPage page\n        ).bind @, page\n        onError: (e) =>\n          @error e.message\n    ).bind @, page\n  onPage: (page) ->\n    @logResponse page\n    @ready page\n    if @infinite\n      @lastPage = page\n    @countPages()\n    @checkQueue()\n\n\n\nMeteor.Pagination = Pages\n\n","\nTemplate.__checkName(\"pages\");\nTemplate[\"pages\"] = new Template(\"Template.pages\", (function() {\n  var view = this;\n  return \"\";\n}));\n\nTemplate.__checkName(\"pagesNav\");\nTemplate[\"pagesNav\"] = new Template(\"Template.pagesNav\", (function() {\n  var view = this;\n  return \"\";\n}));\n\nTemplate.__checkName(\"_pagesLoading\");\nTemplate[\"_pagesLoading\"] = new Template(\"Template._pagesLoading\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"pagesLoadingDefaultCont\">\\n    <div class=\"pagesLoadingDefault\"><img src=\"/packages/alethes_pages/public/loader.gif\"></div>\\n  </div>');\n}));\n\nTemplate.__checkName(\"_pagesPageCont\");\nTemplate[\"_pagesPageCont\"] = new Template(\"Template._pagesPageCont\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.dataMustache(view.lookup(\"divWrapper\"), view.lookup(\"pagesData\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": function() {\n        return Spacebars.mustache(view.lookup(\"divWrapper\"), view.lookup(\"pagesData\"));\n      }\n    }, \"\\n      \", Blaze._TemplateWith(function() {\n      return Spacebars.call(view.lookup(\"pagesData\"));\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"_pagesPage\"));\n    }), \"\\n    \"), \"\\n  \" ];\n  }, function() {\n    return [ Blaze.If(function() {\n      return Spacebars.dataMustache(view.lookup(\"table\"), view.lookup(\"pagesData\"));\n    }, function() {\n      return [ \"\\n    \", Blaze.If(function() {\n        return Spacebars.dataMustache(view.lookup(\"tableWrapper\"), view.lookup(\"pagesData\"));\n      }, function() {\n        return [ \"\\n      \", HTML.DIV({\n          \"class\": function() {\n            return Spacebars.mustache(view.lookup(\"tableWrapper\"), view.lookup(\"pagesData\"));\n          }\n        }, \"\\n        \", Blaze._TemplateWith(function() {\n          return Spacebars.call(view.lookup(\"pagesData\"));\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"_pagesTable\"));\n        }), \"\\n      \"), \"\\n    \" ];\n      }, function() {\n        return [ \"\\n        \", Blaze._TemplateWith(function() {\n          return Spacebars.call(view.lookup(\"pagesData\"));\n        }, function() {\n          return Spacebars.include(view.lookupTemplate(\"_pagesTable\"));\n        }), \"\\n    \" ];\n      }), \"\\n  \" ];\n    }, function() {\n      return [ \"\\n  \", Blaze._TemplateWith(function() {\n        return Spacebars.call(view.lookup(\"pagesData\"));\n      }, function() {\n        return Spacebars.include(view.lookupTemplate(\"_pagesPage\"));\n      }), \"\\n  \" ];\n    }), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_pagesTable\");\nTemplate[\"_pagesTable\"] = new Template(\"Template._pagesTable\", (function() {\n  var view = this;\n  return HTML.TABLE({\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"class\"), view.lookup(\"pagesData\"));\n    }\n  }, \"\\n    \", HTML.THEAD(\"\\n      \", HTML.TR(\"\\n        \", Blaze.Each(function() {\n    return Spacebars.dataMustache(view.lookup(\"header\"), view.lookup(\"pagesData\"));\n  }, function() {\n    return [ \"\\n          \", HTML.TH(Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"value\"));\n    })), \"\\n        \" ];\n  }), \"\\n      \"), \"\\n    \"), \"\\n    \", HTML.TBODY(\"\\n      \", Blaze._TemplateWith(function() {\n    return Spacebars.call(view.lookup(\"pagesData\"));\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_pagesPage\"));\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_pagesTableItem\");\nTemplate[\"_pagesTableItem\"] = new Template(\"Template._pagesTableItem\", (function() {\n  var view = this;\n  return HTML.TR(\"\\n    \", Blaze.Each(function() {\n    return Spacebars.dataMustache(view.lookup(\"attrs\"), view.lookup(\"..\"));\n  }, function() {\n    return [ \"\\n      \", HTML.TD(Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"value\"));\n    })), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_pagesPage\");\nTemplate[\"_pagesPage\"] = new Template(\"Template._pagesPage\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"ready\"));\n  }, function() {\n    return \"\\n  \";\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_pagesLoading\")), \"\\n  \" ];\n  }), \"\\n  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"items\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"item\")), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"_pagesNavCont\");\nTemplate[\"_pagesNavCont\"] = new Template(\"Template._pagesNavCont\", (function() {\n  var view = this;\n  return Blaze._TemplateWith(function() {\n    return Spacebars.call(view.lookup(\"pagesData\"));\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_pagesNav\"));\n  });\n}));\n\nTemplate.__checkName(\"_pagesNav\");\nTemplate[\"_pagesNav\"] = new Template(\"Template._pagesNav\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"show\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      style: \"text-align:center\",\n      \"data-pages\": function() {\n        return Spacebars.mustache(view.lookup(\"name\"));\n      },\n      \"class\": \"pagination-cont\"\n    }, \"\\n      \", HTML.UL({\n      \"class\": \"pagination\"\n    }, \"\\n      \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"paginationNeighbors\"));\n    }, function() {\n      return [ \"\\n        \", HTML.LI({\n        \"class\": function() {\n          return [ Spacebars.mustache(view.lookup(\"active\")), \" \", Spacebars.mustache(view.lookup(\"disabled\")) ];\n        }\n      }, \"\\n          \", HTML.A({\n        href: function() {\n          return Spacebars.mustache(view.lookup(\"link\"));\n        }\n      }, Blaze.View(function() {\n        return Spacebars.mustache(view.lookup(\"p\"));\n      })), \"\\n        \"), \"\\n      \" ];\n    }), \"\\n      \"), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_pagesItemDefault\");\nTemplate[\"_pagesItemDefault\"] = new Template(\"Template._pagesItemDefault\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"pagesItemDefault\"\n  }, Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"properties\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV(HTML.I(Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    })), \": \", Blaze.View(function() {\n      return Spacebars.mustache(view.lookup(\"value\"));\n    })) ];\n  }), \"\\n  \");\n}));\n","global = @\n\nth = Template::helpers\n@_TemplateHelpers = {}\nTemplate::helpers = (dict) ->\n  global._TemplateHelpers[@viewName.substr 9] = dict\n  th.apply @, arguments\n\nte = Template::events\n@_TemplateEvents = {}\nTemplate::events = (dict) ->\n  global._TemplateEvents[@viewName.substr 9] = dict\n  te.apply @, arguments\n\nTemplate._pagesPageCont.helpers\n  divWrapper: (self) ->\n    self.divWrapper\n  table: (self) ->\n    self.table\n  tableWrapper: (self) ->\n    self.table.wrapper\n\nTemplate._pagesTable.helpers\n  class: ->\n    @table.class or \"\"\n  fields: ->\n    _.map @table.fields, (v) -> value: v\n  header: ->\n    _.map (@table.header or @table.fields), (v) -> value: v\n\nTemplate._pagesPage.helpers\n  ready: ->\n    console.log @, arguments\n    return true  if @fastRender\n    @sess \"ready\"\n  items: ->\n    @checkInitPage()  if @init\n    cp = @sess \"currentPage\"\n    op = @sess \"oldPage\"\n    @sess \"ready\"\n    if @received[cp]\n      @ready true\n      n = cp\n    else\n      @sess \"ready\", false\n      @getPage cp\n      n = op\n    return []  unless n?\n    p = @getPage n\n    return []  unless p?\n    for i, k in p\n      p[k]['_t'] = @itemTemplate\n    p\n  item: ->\n    Template[@_t]\n\nTemplate._pagesNav.helpers\n  show: ->\n    @fastRender or (not @infinite and 1 < @sess \"totalPages\")\n  link: ->\n    self = @_p\n    if self.router\n      p = @n\n      p = 1 if p < 1\n      unless self.sess(\"totalPages\")?\n        self.sess \"totalPages\", self.PreloadedData.findOne(_id: \"totalPages\").v\n      total = self.sess(\"totalPages\")\n      p = total if p > total\n      return self.route + p\n    \"#\"\n  paginationNeighbors: ->\n    @paginationNeighbors()\n\nTemplate._pagesNav.events\n  \"click a\": (e) ->\n      (_.throttle (e, n) ->\n        self = Meteor.Pagination::instances[e.target.parentNode.parentNode.parentNode.getAttribute 'data-pages']\n        unless self.router is \"iron-router\"\n          e.preventDefault()\n          self.onNavClick.call self, n\n      , self.rateLimit * 1000)(e, @n)\n\nTemplate._pagesTableItem.helpers\n  attrs: (self) ->\n    _.map self.table.fields, ((n) ->\n      value: if @[n]? then @[n] else \"\"\n    ).bind @\n\nTemplate._pagesItemDefault.helpers\n  properties: ->\n    _.compact _.map @, (v, k) -> if k[0] isnt \"_\" then name: k, value: v else null\n"]}